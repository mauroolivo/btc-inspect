extern crate core;
use serde_json::json;

use wasm_bindgen::prelude::*;
use crate::tx::Tx;
use std::{io::{Cursor, Read}};
use tx_fetcher::TxFetcher;
use crate::utils::set_panic_hook;

mod utils;
pub mod point_scalar;
pub mod field_element;
pub mod point;
pub mod secp256k1;
pub mod signature;
pub mod private_key;
pub mod helpers;
pub mod tx;
pub mod tx_input;
pub mod tx_output;
pub mod script;
pub mod tx_fetcher;
pub mod block;
pub mod merkle_tree;
pub mod merkle_block;
extern crate console_error_panic_hook;

#[wasm_bindgen]
pub fn r_try_command() -> String {
    "02000000000102b6cddcad2c91605806d343d9b3bee830ac1dbad7b0947c3e8128c1d509ff6a0f0200000000fdffffff51eb90e06d2fd89fc2d44ecb3b61bc7c283c28bb5bd917fda60f9c70d8a508780000000000fdffffff0459fb01000000000016001460d6e1ace002fd8eaf32150bf57c85d44c16e16a8e83000000000000160014fc500b6131ec3656c69e61342fe79e704f1d0bf7e077010000000000160014933d02a93ff4432126d5dc07f4e7a789921386c28e830000000000001600143ca60043256e265f47742a8203692497f16d17060247304402204cdd7422269eadfa575cacb86ff71364d76c24e7500242dd7182436fa357802502203d6c35bd27806b1325b89c4fb44ac6b096cbb3b73e3571ae8e16f9c19817a043012102d7a6619fd168d86861cf210a181565e04412f7edced7545d0d691bdc0f9a0ecf02473044022015fb3bd8b9feb9cf9fcbcb9fb903f4f78bfaa3799a6179c6893029a0849f58f5022014678e7521f57c18608944b48269bf0a3d1ad2dd6b19d0b8359f31f75fff87d101210239cda05e52bbddf86a021903b6209758d9787b5aa3867db4bf5609efc05bd8642dae0d00".to_string()
}
// #[wasm_bindgen]
// pub fn t_try_tx() -> Tx {

// }
/*
#[wasm_bindgen]
pub fn r_tx_json(tx_str: String) -> String {

    self::get();
    //64ff0b827f7899674fc26b693c557852540b9260c5c29cf18f536b56f01b17ba
    //let tx_str = "02000000000102b6cddcad2c91605806d343d9b3bee830ac1dbad7b0947c3e8128c1d509ff6a0f0200000000fdffffff51eb90e06d2fd89fc2d44ecb3b61bc7c283c28bb5bd917fda60f9c70d8a508780000000000fdffffff0459fb01000000000016001460d6e1ace002fd8eaf32150bf57c85d44c16e16a8e83000000000000160014fc500b6131ec3656c69e61342fe79e704f1d0bf7e077010000000000160014933d02a93ff4432126d5dc07f4e7a789921386c28e830000000000001600143ca60043256e265f47742a8203692497f16d17060247304402204cdd7422269eadfa575cacb86ff71364d76c24e7500242dd7182436fa357802502203d6c35bd27806b1325b89c4fb44ac6b096cbb3b73e3571ae8e16f9c19817a043012102d7a6619fd168d86861cf210a181565e04412f7edced7545d0d691bdc0f9a0ecf02473044022015fb3bd8b9feb9cf9fcbcb9fb903f4f78bfaa3799a6179c6893029a0849f58f5022014678e7521f57c18608944b48269bf0a3d1ad2dd6b19d0b8359f31f75fff87d101210239cda05e52bbddf86a021903b6209758d9787b5aa3867db4bf5609efc05bd8642dae0d00";
    //ae8032eb2f698ff3e7a06deea33bcbf463466e84515c688940fe4a4e7dc4d966
    //let tx_str = "01000000000150b00284ada7d27f7b814f83a29c3adc6ec1def406024cd4d64e6bca1af4ea3a5c000000001716001498ad1bca86b5d8f245b9bbd4b5354309c070a495ffffffff144bb7aa1c9b625d033d190bf9c2b68378ed204757ee73654bc03b9a725785520f00000000ffffffff9765e6144802556e939dd5926049e86acd37f7b6112efe2f62c6ebfb30cb3ad31600000017160014cdc4cd04bb82a9764a27f0511de2e3368ef40744ffffffffd90041778aa07d7ba5082ac481c5a870b061424519709e4de6395c71551a0b60000000001716001439fd86ae0c1f5f30f25755fbe4831257136469feffffffff4be4a0f17d1d319f8e9008d1eb56a3d4abc67c9a688186eac2a55f839dad1e8f00000000171600149327acb1117137cdd0639a80ee8d210845302117fffffffff10bb59b569e16afaf3281f1e178a289d04766463e0141cc8b3e5f1d041a1e5300000000171600147f7f77ea1b0e3efd439090e922c3b41b981b9b86ffffffffbe4847005fa8feb3228aa7ddea9df0d7e66cb5a5ba732b936c41cf4d6f06eac4000000001716001438e85c35e8c0b29a94bcff23d194a82f41685c99ffffffff4a09e3d9ca589575b33ddc0c1ad9e7be16b4f2c1021d9d337cd90c8e742e42bb01000000171600145725d658157bb17b86307a3a2d411d017b5a8474ffffffff27b0818cba185a4574909b65a8ec5ab67e4c9bd50cb94ba5ac2510b2130a092d8400000017160014e46886c24598e2097ac4204d36780a448466e23fffffffff4268bf20f95060a00b030d5374311979af4dd393398116a823450ac42f0510d34900000017160014632fe58040f660001f6e017f4f99c435f3aa4052ffffffffd8fe154b9675802448dea81c772196d86d3e92b6645651d5f69e320cb8d7fd340000000000ffffffff30ca3feeb2ccf26eb08a7542d53b21767a24d901740b248f8a09fb19b7e6991e00000000171600141a208ea2952803d09745c0cb54fb438b0d142924ffffffff1b2c8ce7a419a6b19410bcf08a9d58f05c624c083e63f8b0e017d1f5ca80ab570a00000017160014a724b4773b6f16bf77d5cb6f9af3f8cfc52b0c79ffffffff99e4b9d5205d40c51fa9ae1c1ecb576c646c3b85df66af9b0ff8d6b50922592b000000001716001496cb04fa0a74c8cb6d083be5118a455349935d45fffffffff8b36291d25de36c9f407b3c98db8719d23b86303e81ee1d6b8000465b1343f800000000171600147172a44e5be9c6c43c56400a9833059adc53e79dffffffff45c8e5135e084231fc41ccec8a97c960a826f2852fb080ca9a7c0193eefd9c4b000000001716001496cb04fa0a74c8cb6d083be5118a455349935d45ffffffff12dbd5401f3931c951e2019111fcc3f2f2800ad7c8a855f9ae448295bee0ad2100000000171600142ea26019e3cd3f6c4ddb0427a6d7fbbed42cbbd8fffffffff36a0c7b9130c3d8fb864a5a2c2eb8056d31c50f25e4044ebcd577a7e5597c820000000017160014b7fda493b0e7e4eebe515710d1866a4cf0b72f93ffffffffb218cf52beb7accdc25bf4be6828483187a7eb2a080a1b968b233e000579ab00000000001716001441750dc2eab85039a189a3f122e3f5f82f789006ffffffffb00284ada7d27f7b814f83a29c3adc6ec1def406024cd4d64e6bca1af4ea3a5c0c0000001716001454d70fc04999f164636e9a121e819d3164c10461ffffffff11b43663e07af8ceb2784a606bf655ca6d55de0f0f7ecce7091a9972609d7218be0000001716001465b8ff29c76fc4e2cceaf516fb670faf7ce995ffffffffff96426ef5fee6138bd48a22fa8f526b62060bc05b275dd2935577990d4477c2575e00000017160014dd8805944f5be3c290ca5bb2b5fdee6e58e8e82cffffffff7a4dcc9bb6b6ff014c08db8f537d9964e5716b3da2dc15e7fe8e8f3940f26a5b6900000017160014599281b90cdeed30965bebe9a1d0cff708004758ffffffff038a9c1a76f1622f39bdf872b0f9920b1e048aa609684d92d2d11da5e91ab32603000000171600143df8dc3800fd3253cfbaae7dc8c84b89a3c9e48affffffff83131f7be50fba57be9e1a70d112a27a2f6c1ba56c742341e3b143151729b48a00000000171600141ae2f3dc7421c5f7262d561d562443ff6d77492bffffffff206c3d48fcacc36e17165be92c38b1961663e433ceeaa21def65cddee3f5cb3c6a000000171600140ee7aedae4ab19435dbbee7b75e1f8d6c6ebc267ffffffff04fa001d9086b39aa7dfaf1782a2857bbd14e3d4e6606e1c6620fb05de3787d60000000017160014c345ff871934ee79379817afb57e77bcf28413edffffffff11b43663e07af8ceb2784a606bf655ca6d55de0f0f7ecce7091a9972609d72185d00000017160014a8fb764fef414422e131940f6827d0a60678e212ffffffff2c01d91167251951cd80f3a050369d0a5e0f4367ada45f56a3ab7bad2667c1be0000000017160014536ee28a661ae5634fb59f8015671fcc6b163856ffffffff7a185b0bda843212980a467000539ba984cb5b22d7b9100090e6ca68da749f1c130000001716001456298c095b6a9c8727cf5fcfcd9c8de7f0860f05ffffffff3cc41ca2f4647bfb44146aa20b219351b5c39f1f6806e700d8116d90d7b5cbb500000000171600143653b74c646e46fd496e1ef71a99e5186386552dffffffff4268bf20f95060a00b030d5374311979af4dd393398116a823450ac42f0510d3380000001716001485322bbdb20999e2344f56e428ddf92b76fc366dffffffff56590a2faa16510d56509b10db17e04cef1c86e0506c4e94bd7900154500e2edbf00000017160014ef30b5c57d762880e41302f797c25ad8341dabecffffffffb00284ada7d27f7b814f83a29c3adc6ec1def406024cd4d64e6bca1af4ea3a5c0f000000171600144825a1363487521c56d2e0b7c6c8acd14791e9b9ffffffff3df9bdb4b884a7a97bf193b240705854f2618e5f7c3a434a5c0fcfdd61cfabeb0000000017160014590c98ef284cafc41fab0e35e7eb9d5f780ffcc8ffffffff4ca0b832e5ff8d0753430e67a9893dcd33d1ac237eeac236a64e4bc15e0dfcd1000000001716001461c8235e911329d3f5fb4fad27ee3afd3cc6da6affffffff96426ef5fee6138bd48a22fa8f526b62060bc05b275dd2935577990d4477c2577a000000171600143450705530c4cbd17682beccc7e7b857de774e8effffffffdd0b3acae6b1849c14262755ce317fcc83003fdded7e88e645b3c47ba5417bf606000000171600144df7b72c443ae99a8126f99e313b025a2e85b336ffffffffa9b08cb6fd58fdf8d769ff6c010c85100955e887c9305c0914db71a182d79bdf00000000171600143acad49ec930c061001309a0776df3e8c8c634cbffffffff32257cdca374469bf40b4e7d890f9fdb63952b679d7b521303c2ae01ecac49aa01000000171600146da33265b61d4b5b95d7adcf012c2082294ae91dffffffff7a4dcc9bb6b6ff014c08db8f537d9964e5716b3da2dc15e7fe8e8f3940f26a5b8500000017160014c80058ba782402c22dd9aca0bb2afbc144a29e3effffffff56590a2faa16510d56509b10db17e04cef1c86e0506c4e94bd7900154500e2edb400000017160014726143f8fd24c4ff85bec987a765ad2bb22d77d1ffffffff38f41ed19c923e5b5520f41bb4ffc24439b816c0e104d399d784a3c3a027129b00000000171600144f1750ce5716edc806538f451d6c63628cad4908ffffffff67e1f1cefaabf68846f30a1dcd2b110dcfe237c8e809c2ba980c32dcb00b9fff000000001716001438e85c35e8c0b29a94bcff23d194a82f41685c99ffffffff1fb1c8f188c83373f5d737fd3feae0f018907e9b62a41a0647adcdeb1dc60a325700000017160014ce660d084c9fd6f2109a391324a26cd7257513baffffffffa0faa25587dc3484a59001e81f4b3c04250a598a147836c7b357fb6c64b2b2435e00000017160014d3c326e0e4e20e49c0a038c26e5d6043fa5ee8c4ffffffff7d713ac95b599005bd2d8ca8e6698c5f1bebb53a00022334b318193510708f18230000001716001449384f1bee929ad544d0ed88724f84b22e4b4bb2ffffffffa8add303d19682b324167d48ee418415cdfaf9fed8e9cad475082a3cf2e56e2a1100000017160014930f6f656c1013fcd8a348c3da4b96495525e321ffffffff974093ea0a5a0701852ceca1a75ca823c18b55272b4394cc9acfd590dcb5f20e0000000017160014c67fc16f003b3570859f206a38e7b48f0371170bffffffff00beee6640860a7de1ab60dce723c0d2b7b5dbcc7afda00abe085f17fb9788b600000000171600147c37c04a8ca43ccdf8f75f5d23aeff412b74527cffffffff1cd4d6d8e6c5f9881602b3f8074153e77a6e94e3b2043ed8f9796c8148bca58d0000000000ffffffff4cd23d00db89402eaec62f10be61ac9a5974959284ae5989b69d933d2bbea413e100000017160014642d914f3bbc594fa0c45bab189bf0aa6e951a06ffffffff3aff83536fc1d8154aedd937e3f18c8e5f17a20537710a9d4fda2a264a47c83e01000000171600141a208ea2952803d09745c0cb54fb438b0d142924ffffffffa23b216e5b293855e63386f5b5fe08c7f3131225b0b101867fc54ee8b019d4a80000000017160014c51ee8c19b9c45a31d440ceb1ceb021865ba39edffffffff82565a5fd11de6e9ab90c1c966b7a18bc2b753e95184f05c895617a00e595825190000001716001458ad5a8e12bff63464ee18d4c6e60d3cd09fe9b7ffffffff5e8a5a6010b5eb91aaed9881ed3dda0cf962b5ee9d1b7465ef0895756bb535bd09000000171600142c8d52f9e89af9917fe2295124671469a98c4875ffffffff418a106679d3937167ce57fd4727b453bd1a20e217edeb84420049fc6e3600c400000000171600148a956e1636272781cadb2ec6feac894d6d866a8cffffffff30e12a43b93719e180281e2ae4b4302c603ce11c7534b5a122626e08ea1bafac0000000017160014bcc825c02e8a9620c13d2af7d1609a42f066ecb3ffffffff7a26af53f28484d849e4784ee70f4898e96fd7fbfab2377b5b139f1059077ae700000000171600149adb414d5a3ad11c15f92beff0425beebadafcc6fffffffffadfa889407382f2cdc92ce8b1a58dd0b605bc4fa61ad1bc09d8fffee661478c96000000171600148229b92fd57db4c684be3f7455d2c14cb272bc6fffffffff52cd4f53af9d12e2d6d30d536098f56d290aca713d4c62beddd95e76e61cd57c300000001716001485956f48ec527e177791eb49725c48bf56b972ebffffffff3db5f9b24e47d79a6ce4b1f7d4392bcd99374b8d48cfb28d82c38bea74ab92ce000000001716001449384f1bee929ad544d0ed88724f84b22e4b4bb2ffffffff2f9c33bda7ffd019e9cbb4c3d23a14ead4b7da98f159e80e51dd4305f7fe0f0495000000171600145fc7119661c16f9df2bf25babd8beff728583b54ffffffff5fb12ae9e2d7d0648cead82d4e51b43ecd60e069c8c7acc2048a21cc0f611edb000000001716001474985c323dbe0b215dc0a322e9a425b14848bac4ffffffff2831dd8d2fa7f0bfa12ea1314a540664bb73d07775ac83a789321d0027b36fd313000000171600143836cb3dc7bce42cd2a04d6fde6e7772b8096ae5ffffffff391b8057a7dd9c0bb98eccc518380fd1c94c392dfa86be4a5b64b3c614fa6bee12000000171600148c752f22672ec84075c4d71bb9b6bce2e1356198ffffffff07e4e7cd83b9b2852d65a4b203bc5561ae2f7971bfce66472569f8de642932c5b90000001716001441750dc2eab85039a189a3f122e3f5f82f789006ffffffff5ad13d75089285870b4eabb2e90282fcda03ba57164d208d0f2c3e9205c1c20e1d000000171600140350027ca20efd910ff2e38a83d06d316952c290ffffffffcebbb255e141843893eb7dc028daed2c8657b3f92dec3fdb2c6491f93d4b7eff5300000017160014e826a974a5606bc158b0b64a8803dfc54fd19bf2ffffffffcebbb255e141843893eb7dc028daed2c8657b3f92dec3fdb2c6491f93d4b7eff210000001716001441750dc2eab85039a189a3f122e3f5f82f789006ffffffffe4ccf12c8d3b8f8ba9f7ca8af677c3ce832ff030d437c279838cc279568c7b64ac00000017160014f38fe1698bd8a52122c9f4b8805598f3b9f57edfffffffff2176a57f01a04d8588b412e48bcf5f609e85756d60d546b2a55a6aaef679003f00000000171600141512fecbcf52ac8e88c7967bc732f6bb5616bb8dffffffffe97fa97953d502f145957b46413a7bc6b6ad89898f1f236145c8e986f91f485e0000000017160014e0874bf3d5bd7ac28f4cb05a7794c533af200dcaffffffff8cdf5949f4c7fd813621d682ea32c5c45c3ab3f7979fc5a9fa77519b2fca13a91e000000171600141512fecbcf52ac8e88c7967bc732f6bb5616bb8dffffffff58d468114f04f1845018f956ee17970a62cfcdaa62abeff20c7a7d3aa0a2074b2b000000171600143cbdeedf0f4ef1012c78bdd8bd1260a29ef2c063ffffffff2567973caea20dc5915ce0c8a272e535a74b3cbd4053f39ab2651753ca4b61a7670000001716001454d70fc04999f164636e9a121e819d3164c10461ffffffff66074b170b5534e3ccbc1520825f2ecbea47a72165b02ae13530e566d104c3150b00000017160014150d4152a2892f954563cba8026c963d85514bacffffffffe043f0af6ce1fdfb5f01eb53e85878924daace9889dac5522fc61aefe01b8c5a0000000017160014f32921a25f3a2023096dc1ee570adeee47f08706ffffffff66074b170b5534e3ccbc1520825f2ecbea47a72165b02ae13530e566d104c315de00000017160014a493a8635198f69ce78b9272d73db929b41ceecbffffffff680a4814e90235418d983f011d5601df0f307fffee6224d8b9ef03cd7d968212000000001716001454d70fc04999f164636e9a121e819d3164c10461ffffffff0600ca9a3b000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff000ca9a3b000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff000ca9a3b000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff000ca9a3b000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff000ca9a3b000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff0227e6557000000001600143925d8a1d18cd0d3f793da475bc8ea7f5b82cff0024730440220403274dfd131373e0eaffc270650fa17dd0617688e9430609edaeaa1eb775556022006e50ad9a88b0b9b26db0bb47f9ff4f38a0e8897d7e6b6108b5cfb78aabfbc540121028088abfbf83638060443aa2af0f25cd09c6b9b23662b5f6719707f3c640ca5b2024730440220439f990a074c6642e9c80fb3ace61bb8229ecc12640cfff54c5eda5b764eda3b02202309080bbf797f90f6dde675b1ffbd20f860f636d05c0b044dde3b22094f57ab0121022710c03e62b0c7e3c93baba1d5b2e04df43592e1ac4d2245d943d4b0a91d7dc202473044022017c9dbc00972898520005980436935d87e7c7877e84786403e1a6b37f1db3ad602201ce0af22d2106ee902b31958e60fe0d34bf36a18b3feb2a1f0c2e9d84911b302012103ead249171ba2e8366ac699f0dd833b08b81788367a4388356dd4e03548ca058802483045022100ff3b11101f5af94a0bba45c267211d575e6c6577ab5d6bb30542cf4f1abecd8902205d55a2236693532207dbaed849c82003d6dcb402343f71ea0d14f46668b8b53001210390d17e22eb8bc3ea79704af8c9cbed65597f7b2ec2aebb44f4272cd3f305e1e30247304402206684fd467e792f84b80ec76171ce2a17018bacad090f70f4b7a883260d5f5c5b02202080bdbc79facf60d30d127a749979b2296f17b04bbbedbc3fae272d78b8060301210264d6e39b3b7b35ce2f6827c36c64b17e86266373355b59585c0e0b99ad0997e902483045022100b3642bb8ff8c03edc687b97a622440ad4f45efae8cadf9448388b9073808ab47022003113cbe4b9ff6fa702f3dee98925598af3e8ef8b3058495dff406a07983cffb01210220ce97f208d7340efe45db7c1fa0814d06269936faa143df80251408e346c19402483045022100da4198a11806620037f70519845b474ca67005b778095a735621d70946905c760220691a0b55f436d5f2434a23671791deff4eb71da50eeef7e7e829c745e713ebc701210272d356c08c4e4b1792ad436e5817adb001c08d18e8bc4a5184f18d95fc34337a02473044022067a9ca8f286327d66709100c14bb19f77a277e1b29484d4f5387b062659945330220669c0ce65fa07c39eb55c11fa9e79de1ac0dd445e1b90a291cb439c128548e47012103bfeadc55a716b2d9dfb2faf87b82a05dc827415fada11de520d87e986346bfad02473044022079a8a7fefa22e08fed2c7b0efd7b9825e41b38dcf15c5b8777e6f49f0d5208e50220083fad58441731d81908a7d6b82aa7ccd7cae7d672869044a87fcfce1f373abb012103979c9bd4d6acf03936e8c9b21ea10f15dd4498479e4e59588d170a15cc6759bc02483045022100f41da49fb0e65cdb66c6306631a3fffa09f3d351ee976ea9c14650c2bf30798d02202ececbe1d71788ff31302cfc5c2f77c64ec83baa011c10b9b4726072b2719bb70121039c6ec2c70822cff27f9f9ac7c7cf03aec203016238fafb48e6cb8b26f4e2d8510247304402203a4a0d66e473b7686e1e3ede1a5b52a2cdab7e120f1bd251512d2550077281ba02202d6d3c6b48a6949b37b23c6070ded3496cd5566adc26b6b3932af253f72020d60121032604aeaad952e0dc40c084b7db01547770efb31f200edfbeebac23b72ed1a1be02483045022100a4a5a3d50ae216f15d4b967420e902f17cbdd4eaf2f3030dd55bfa76c083ff0b0220426cd746c181da2f237ab9aa224da52a8bfed0802cb5f0a5fe15423e6132f17e0121030e397f1533b174a7c0d7aca0ef97c7ef2840f2a5fadbf5597c68196476ffc72302483045022100dee7dfbcfbc9972d9b91da5effd22667a7f637744b0e1aaae6a673774cf716f902205da7f9593b8e9060fbc64cce9bc8224c87b2723ddeae26c4fd872da368d1d9e9012103c73e18e29df417374c8cea53ccfd89fa4d0d95543ba9db6b0d5b600f39dcc63302473044022006f8946a4f17336fcf352abbffc5a903ac6da7399c67821e8d919e8c311445c6022006d1365c2fbb18b334e5f2ffa719bc1b9de5d4ef770dd502ec385a5bc96a58f20121038466a5eb8c246643be74a0560ec9446e95eda6eb89eec3abfb0e62a6a8e69e9e02483045022100b7aee6ac1d24bd8019fe2e766190b73c600175666759846fa4341f43b1b7f4fd022005e84a4bd794d4bd308d6576397f512efded37418b7f24e4e8f7e9ce8fb1e644012102ff72a639010c011d10d0bf6b462fba32550de9c2213b8486e883136c3072da8802483045022100ade97102e1773a07d2334a87ad655c600973e9f1d86de72d1c61e43a32a61aaa02206342f43d3a7f00b137545084ce87f558b2defde9748c190c0f05f07299c615290121038466a5eb8c246643be74a0560ec9446e95eda6eb89eec3abfb0e62a6a8e69e9e02483045022100ffb8358df20530aa9e6d369499402639ed77293b84901ad5b4105d830ad85599022061349e7492a0c2e07c97c19f51f121adcaa52c0e726f5f3be78f4e861f9f18a1012102295b548370b472040550a60e4121a2327b4fd693f4e8e555b08813a87fd4e5bb0247304402207aec70650136101bef1e471d75caf3e731829ff6d72c18cebe7c9978f3c302c802206053ccd55f04f24919244c5d94b1d463d06bc7467c6935488eb0515e05b7ebf0012102e534b8d11353458feb728a49277ee876436382c9d41931714b6149dd6c2ba49d0247304402201e2ed1d9557215bd6f39ae538b3bb70439f07abc45bf2c15fdeadd83d09ba1c7022030ad7474b71f71b961a47ac122dc963d7ff815a4ec8233324c5c0932ed0bed1601210384fd4d5916fd3bdb0b6a2a9facd3235bb281701d2905d70014b98feb1e70f6040248304502210095464901ff3ea454ef4f348b64abf787986e657dc2da3c93b2c38ed985fd2b35022008ffb221d4d94aac06ab186a10fc9aa380a5b66770d8d60c883f77dc3129a73b012103dff47a806e300a37f07b0639099e34243e51f4d493d992da61c0a36d8b66ca77024830450221009904ea950249f9e8d9d9cd5cc3aeaf8e1cb1b9acbd66c6c9fa40e9aef860e1ab022007357d2bdb2120bb899e075ae52412016bbd31daefb182dfe82c1cc6b07ad72401210340b8a6f48ef84859b5d017311468c4465215a24bd03388a907b62d5871ab8afb02483045022100c275ca7acb55e48975c9465a6c50b03d18e80e0059a266bfabd9d94cb624223102206cefd79cd6ffa5a8669526202e498213f0bc2185cfe996ba85f21b5a30b2767a0121032698f26663728be865b3a34ac8c0589d6d57cbf35c4d91dd6bceda071f1cb93802483045022100bbedea4dd6c00caa6bf70a4ae2b29247af4c5d5e8859b8416c27b47b5605c7b90220314364ba97e6527590b6f94ae1f724973c86050ef088e277617182bbac22fe6d012103fe99947cd1c07d35792aa144b4f2af02518b497010a60a93b0b2414e93d3b155024830450221009db812ce5fd7a5747a43accf1704f13c03ff7cf7a87e985a308a07a2034012ad02200735e0026a2a72b43ef01472ede946eaeed715178b4b7f7c936c46b40f27b4e50121021f192603f9ac5b80b41c25756ee2eca969c168365e9ba6ad9a4cc810e4bfa47002483045022100885b536c73c96f7c6384c79e53072931eb005bdc9cebb4f8d72df01f316f02f302203b2df6ab5cbee4b08041fc71ec8d899fd919aa4decbd49a262d06aecfc23d85b012103279313f9999551a4122386f1fec4464ee5cfa1f5f844940f80dc4285cba4053702483045022100cdf6b69259fc1827f64fcbeeee76d2dbe45c74231f28c88e0b0e05a6eff2e264022079e3f5a14a15a46aebdb98b589cfb59efb6d7abefdbb734b58d8199e6701814a01210364d0e24f0f4b1baa3fa8c724f309abe188757b0a4dbcffa416b15dd46c44dc7302483045022100de5edc75e460fb00de5c649be21449eb2c4544c52aecd7c2650585e244e6b39a022032a99a429c2db0f961b5b297238015bf2da90472bc89b0691c2b45019cb87004012103ae497c6bf878ebe200f4535427032b1252b957a149ed3e90ac569460b2dd581402473044022066128f7bec4669c0a589ac2bf280be83f6b0d473fa7d96a23fcb56ef33ef0b2102204ba00e0a2963966686251d4edf0cd338551f5a8aa611f5e7781b945b479f1b47012103fb55c55ce0c0f20c94d3fea6cfb9980497fcc776a692221ed4e96e1718053d9402483045022100d2ee36263fb69dbf24a181f12aae04e5d12fb75e4a261870209d32dd8649dfd60220123b726c4b8df928baf224bae47c6adce0e6ada85d1b57aaf1fc1572a23a87c8012103268d730b154c961a260c82d37f4695cc6258390a7faeb4e8ea2d6ca2077e5b6502483045022100a3969b20df7aa82ce2131bc238a47ff6a170e3de5e43a91e1563508093cf51cf02205aad6d1f859ae8e4d021cde494356681341a6df2c4162160fa70af75564c1b420121022c9496ae1334eae95d0fc4fa4945a3ad5541979d9df6bad69db45399c99317fb024730440220122755be33dddc5a4b904eae8e64a85a1ae9a880e95c2c52c44838e4e89eaf3d022001282b9f87f9c0e2cf9a94502498255b29b3f4aacac64068c96bf3af1a6d94d50121025642cadcaa765026d6a736f2fd2451a17d03908eb4305fc433b5ac828035edfc024730440220380574b9be3b5562e473574a4d2fec21af3646b94573ec2592d3faf6fc7b54d302202fd780cb9644033fdff5db22e4ebe39ddf7fd8ed1dcc46c1de8b51f4d1623aea01210334b26e9d9afe1e881da44bcec50637f25e7c0d92ab8bda780eef340e3fb499d002483045022100f9c8802aae19fa555356296596fd47068d4cf088cee5f1ff60123d5ac66276cd02206bc462c37609823966546afee9a2912d4c9e6b5b94d5f30dbefed0ef9beac0ca01210279410e29c3502347bca403efde3976c03b5230cb11ea27ab18481d3ad3fbe9da02483045022100991112e481e342249b8ccaa8687fa40b049e986b4934d41333afb2a810443f9f02204a0c65f885af379e5c3789c44f8b0674940375a55535230763808be71f26adc50121024ea055acd5b7fabfa1529d3c4f1b737847a4a46a24c45063a32acfc992dc0ee7024730440220334ff4e1d2411300966e1d1a9f6050ce493726ee40a3531507c1b9d9dc9552ce02204e78070100b58a53489ad4b41a0b6ba74fb692dc14db0ac940b42543a3812623012102b706811b0c021c1a921ac4f14e0e874d5498ca27ac0500d481c3eebc5324cc1202473044022010ab0a508c6ab2163f5d61ca77a3f84b68c955b7429867602e50526f8f1b8eda022009a92203838286b2a6fb8d8ddf64a3997374e170617d0ba309430dfdd0a79651012103d6f9f3c9068b6c8edde51795cd94c7f1e732f8af5a88ed51f8ea05e32d6934d00248304502210089fc8a42d3e1354c7dbeef073ab745a46e48a8c4134b0f1a16da5f2bbbe423fc02203abce3d5de3df66ceb76586b4921a9b8abae8a712435091b1e87f82272a3ff5a0121022da5da0249937d4c72e879fedda572ffd3f7be364421a157f55dc0045257e08002483045022100ef23d051b9ef28f8c2cfd4e51f7db07ee08bab61c7fdfa1d821b54bb4c56eb0a0220673570dcbc758945a6eebf49fd6f47423cdac8a8d0f9ab955812c17bbb21e0c9012103167fabb03ea528362237e8dbd1ffd7c5aceeb28c63d62675a56ca5310393827c02473044022075f7040f27ec4003d7d6c69de7d7988bb2de9757d4759a5921cb1d207597b02c02205fcd23899bd96e222c15f973ba6abdd54dc7c2b9c77ce1cd92c099ac6b23a4f8012102716145153e3dc14aa2651b003ff7cd213e188dbf7b50e632dc2d062b1c61326c02483045022100c1ad876e2425daa5e35ffaf1895b4ea5f4c17f9767754b4751182bf131ec804402201232863774b78fc43e4e362b07ed8381443d49682b3712a0641c76c05f10c5980121027584dbd24678b94f84dee055e25c6ae576c980021346712e3dc6733bdc279e4d0247304402207133d9c80b15a6f9f91606bad68c808cae28dee1b38d2f238ee00cc392a15b5a022038d9edce2524e9bf47f0b34f9a813a067bf0547d82b2d5815c3741112fcd5f39012103f1731e971d81dfff4dd7beb0e6d5c07cb33e79ad5655ed4cc543a964bf3ac2d602473044022047fef6db716251b2f9cb6607bf47fc9f19353933cab23889dfc5f468570ca9e40220671beec0f1a413e1c57a942c289b475f5d52f09290a7b5533bb8ed31e96432dd0121026dd21716b340979afd67f04826b2482b2544656e5365fb28f60ebc39f26a0a4502483045022100a9af29b0acab9a7ba92bbd3e25d1396ca70d1b2951b485f5320eb532e66c79fb0220526ed5f51831f7227488de3f60af7758a116d5c554c7f3eb67a21e6d738baf290121026e7dde526482914b3d3f46c029f1874229f6ebcd0715c60819831d91ed1d4b1902483045022100f904b3c0f8dc0f51ee72d1502ebee2fe7c9f74ecb9445dd97231827ec7ff23c50220518126307aef33022c0f25c8ba40f2bb299cfb1cdb3781020d9f5f3227b87f8001210272d356c08c4e4b1792ad436e5817adb001c08d18e8bc4a5184f18d95fc34337a0247304402204e3d656a0f3d2647a7819ca8d33ea0dc06c1e4d88b817b17107749483bce788a02204ce40d86c58e5344fe7473855a2d949bdbbf082f03a39ac511ce81eae90fbfa7012103e8fbf70ec9ae62b9c26478470461af92e60f5df7b291a2a56d14147111186a690247304402202cb5417f849aef8c498fe0fc2b18f2301ab6ddfd077a7e906ddafa87b0c3200b02207975680605133029bf3134c16c150e41b3a1e398613a96e0d791115b95f2a223012102b105fe54866333a05ed9e0eaa0adfef5803997ed0a0a9325693bbb2e4ae16f630247304402204cc6c533d2d19cf91d3ab1bcf341d53d80d38863702db13fb4f8d07f780007f602205d704b4fd6993b917a9696322be19e9b6041815d2a7f8248385f79e5716a3b4a012102f7d4d4759bd601b77d776d670facd02ba8c5dbcbaf2f369929de5a90e3b371a4024730440220131b1f51ec4dc678917bb6d5fd3aba27e71b75fb48fa4419a297dfee31944a0402201a3c91671435cfb7ec4a44cf9305b1d3e89d8d5edcba1c22ce50be888c4b38010121027bfa28d64d54e027902f25df3e9617c4a6c5ec6f90c8649bb245952b0e465749024730440220636e5c818344d2ff45bbdae17a7e3e3304359c6268b991a4fa90cf5455469d39022053a00589207860a4f561fd7e8844d99445918ff5fe3ab8bf248341b53f6d8dc50121022b3e27c481219bee984abfd0b7160b42c1675be086381b4854995d15dbbf950702483045022100f9fac7cb781ed017b1677d8539c7ddc8cd13e239180c7ffade362953307094e2022027c628608417c45bf8428f73201281ea5e4ddd50cfd2c7c7bb6185b208ebd8ba012103d292a11d13dc5fca3272f346cf2bf22eb76bdeb973b6d7ef01733480e4de297b0247304402203f16c41b068589c30c1f863a65573649bafec735538a44a2c0ae699d0e51c6b9022009e0690195525ec1d75148dacb070991e8654f0c3704d9d89126b21dbe2a391901210297e49faf1bd0587f92650dad12869f538dbc72c0e85ebfc4a44d3ef675f30b8702473044022077decbca14efd0c8c2f2d1de00e919c034b8d61361ef3922372a7aaa914c4885022060c5375ac9078bc69b30b895a0eb053df979b8611bf333bae4cc126579530c13012102ff561e833585fa82cbab7f43c3696c199aac292889f9411c4625491e849c280f02483045022100d1c7167a5194b02cf233debf6981856464b82fd3acf36308e29291e2faac22f002203bb74627ddda931e42879deea9c70169beba2352eff01a303e0b318851b81e9b0121030e397f1533b174a7c0d7aca0ef97c7ef2840f2a5fadbf5597c68196476ffc72302483045022100ec998a87a93475e5cf650352e98dfc2734d6aeca100cd9da59c832fe54442fc802207f5a5330620bf2bf78330ee5f0215b97bb77243b90ce0c41ad9dee25c34970c60121038ce1b66d46d64d4cec76269893459ba661adb6e271493568683c627ff525fca6024730440220791d823f467cb81fdb12347944d2bf60e8acd73b37a0caf6c62c8638935fa3a4022022d452aece4a8a84ab456f5b23b3616ef0cededc4c8feb0a805ae64d9f92ccc7012102bbacff4b9bf2cc3a7acb5a287b2c56b3f9b7c33bba6b5ce36437105c8f28c7790247304402202b1d0ccfde127a560eb7d8ac21bc157ebdc0356e1f1ea6d0082009cc7ec1409b0220715ea01d4902de0ac0505f125a0cd7307f3f635a42d977d342845c391025c819012102bb401c5e4a4a52302282c961f493f9833615de14136240ad2a8d81298cd6604902483045022100cd40487566c6b00d17f893df22fb6778c492618239c313b5c0068b461f49e9bf02204ed3a63c38e521d56932846993e358d131db27fbd6de4b1dcc584d187f70f5e40121032dd29a7824c09f2be28b95e8490c82c92d4f0ea5d4bc50319f899d7e31d0f1a102483045022100d1ea591820e378c3d7803bb31cd6c0c5cf50542aab716ee2f25ef0139fb93b2e02202b8d8b1421ff8986497d757974bb2e4249dfbef40ad92cdfe0a148bd36581f3c012102fad418190331c26bf60150a900e4e6a514f0742e5f3918cfd35197e8ccc9882f0248304502210082e6e18f2cd92b242bdf43e9f1b9827a9d2a2bc1f6d8406cdc2da58775de5a5402200bdae598be70b77446720525ae8fc08b71757df3559d563ceb23d603f6f7df270121023d34fb78e293062de2130a30ff0adeee15c815e17b874a09b3a610db75aca3b802483045022100b8a4f4fb4e3df27b2e4db803a4769389c8ae7fcfd293a43c624dda8b30a0a3000220030403d3c09fd4a4e07c4a3c1a4b6a00b89b0e1e0614ce8ae7dae9315be87aa70121022b3891896a602a544ffd5a0a1af2f3e47a488bdd1bfd2b8d82ea8e58fa3fc05802473044022046c1a17c05f40436541e6a6e1cb487ca6edeb0cd4ca70d284234618eff1afe9f022065c9aeacc1924c1c9ac22808414b1f548a3a15e943a54287970873e80cf467c2012102a1d6eccdb132d278f54b54add540b861826d2528d8466471d05a715a61aef706024730440220377ef126f1fc7fcb620e716481c2cedaceb9b8fc7fa7991ad78acdf8aaff8a4e0220137d2c9912ff80355c8d2cbd9c986d39ac017a35f62753703cc6ea70dddac55e012102f7d4d4759bd601b77d776d670facd02ba8c5dbcbaf2f369929de5a90e3b371a40247304402204927e6065a1fcef98952c956ce25fa37c7e0277b7259c1a75dd6e697b86139c0022041f4158b5b6327706f20c3d80056680e39bacf755d084ec15474d6248f89769a012103158c6b7ae5a1b4cde3041019b8ad244e7d15c019264a225a44e80e1fd5686256024730440220065f56c7d0a68b5f127db596348db4350032888aee2af64efe3fd7fec38793e602207be69926cc0e64a146d36bdb35b11bcfa60c15b0a5d1437e38ca1bb85251fa630121035c34ace332c011f1a33db83f5ab2c48b56cd8c8b0375b995c56d9c671af558e50248304502210090503b7142fb287b06846233fa3fd1c7718b86c2b0e34ee7947793b66e331977022067f129f563831d52e9159c24ec2f62de7bbb3851e6c9e2a8e7b3550f88ee42450121034190b803bf326fb96e9a09bf5b031bca33edbca8302f50cfebc2e4cecb58fb1a02483045022100889f62d9822d008f5eb9932ef5122c581cfb80045ca1497954671256acdaa27602202273c853534e03aa34c6d1b1b4ac7cfa794f48666ac7c4ee78a926384a2f5d800121036698dae2b74e0430d2f04bd0858859caa9044a371bd01a1f0873436c939c76b20247304402205137fee7c1cc2e1ce0e1a96c43f7c355a20d4d2758ccbab63510c26134ffb8b102204d481afa3a6840055f04888dd13f0d03c57f7c2c16be636930e311064276c37c01210384fd4d5916fd3bdb0b6a2a9facd3235bb281701d2905d70014b98feb1e70f60402483045022100c78f768a0a6103b9b85a8613085ff849a42c23e76bde749e7760e919f86dfc620220438cc7290da2b828044c9326e8b2f9399a618a95457175053cc181b9518f3f5e0121031d53c35c1997fb218c387fee295c8b2e7b99133598e4c477824da1765c310dc902483045022100ad20aa06b8ca0cd0feb79e65dad231bdd7d4f7e2adee6b92e14f2237b0b4e82b022049f8f245ff2d491f0057a3c1d5e95d754ca814690a5f04c5aee1d77d2a7887ef012103a2ea6b027363a80c5753532021d0d583c698409b0258af2e8fbe0bc67ff820a602483045022100f7d663ef89b084aa26956b6c967b7b9af0cf5011afd81e0d7538ee20f2b550d8022033218dd7b36284e895aa3605c9c1530c132525a398a531d73d5ce320aa8b818e01210384fd4d5916fd3bdb0b6a2a9facd3235bb281701d2905d70014b98feb1e70f60402483045022100ea5bcce842f33a147b742fa752fe321f57875f2d4aa8c6e74f8a854a1464cc3c02203152185126c46e85f9b3094508406f99214d234902c7c1408c546abd3aadbce0012102929c5ec5f9c14bf957e76224f7cd8ea0d749fee6e1273255632c3901889aea0602483045022100ec5e92f776d87561f527636597d5bca4339c17dc50a09c24241b15309b9db47702205cf3a2b1a557b833e661d12d1bb056897849e3fc630293d8fdeca1a0686ebae30121023a52fb4b45c26066913364ef609540dd12fd895dbdd809804a85e92342526fca024830450221009cd84af289b268227860515e3c6fc2a4e4b17a1052826018033f728021919e030220290102cdae8c52832a90af5751d0e7a6b56a6b66ab8d291688432be98e503e90012102472ab4b9431fec70ce43d7b8c4c3522d703a90ba8efefb0bdce0d023f8954c5d02473044022016375d872af863cd3cbd07c2cd0768a4047f6b85ef7b2429b130d8bc3a0e6ef4022046592c8b94333a8f37a6469d15400c12f1e2eef98106a034c07706db3375d4c80121023a52fb4b45c26066913364ef609540dd12fd895dbdd809804a85e92342526fca02473044022077ac0c267b73701e38ddb326efddb4a9b67786e2b5d15dbe3da3a1237f3e91ff0220715f9949811528fad81b9c24081004e12d9f70922dd6a836cee1d2de3c819895012103adb960eac6f1d92128b16b6c0c917f8f86fe683b0cfab73f664851407ccace9b02483045022100c53df5d78b562480624d2990734eff1c1b76f7a19431abc240938fe47fc5393502200c9b1cf8469ff368689eb3015fffd83c84cc46439dd1e47e1f7f1ae069f2e020012103dff47a806e300a37f07b0639099e34243e51f4d493d992da61c0a36d8b66ca7702473044022005e6819cb3014f73f9e9f29c8f8f9f25468861052dda0b40db5f5254fede704002205fda99755de37cac932835768424fa978a154d70199bc2358a001c866571609801210264d72c1b0794043ad60f6905d2c0c494895f3fee7dd6e92924e57ed9ccc622bd02483045022100bebe81f3ea0bf5bbc0bc7e58410dc0f42762900e5cec96b784e1a82b03c8881e02200708a674ae1199b38ed9dae5c1947902ff3d1d425c6f9e822d8f115d33ea92bd0121026a8e1c77909d8b6e297aa8879155f6eab85d4ef8d486b5672b3dacd89330ad530248304502210091cad87be67ed2b12a452bc84f41034cd99d5977bea31849742765e683ea37c30220661cee4224a231f877c9cfd0006c1b9abc211f2663c1bc9a4196efb61d1287bb012103baa86ee19726aaed34af92e7e9182c175ecb6982ac7f6124f28a0e66bc39dc340247304402207bc1995789d98b3b81efd86ca1ba27219427a646efbc1028aae1cab62f647a9e022005ccfd8ca4366fae8c05a069babbe96337b1174913d6b7e8e64edfe74a83fb3a012103dff47a806e300a37f07b0639099e34243e51f4d493d992da61c0a36d8b66ca7700000000";
    //0b6461de422c46a221db99608fcbe0326e4f2325ebf2a47c9faf660ed61ee6a4
    //let tx_str = "0100000001e636e0d4ecdd9e530b8542ee29dc7bd0b3db59561d0a12e1e420e536bb22dc09010000006b483045022100b95ef71baebf456275693eca9d474ed13acbabe2ca94a4b42510f3a16f20b9ec022075a93a7064b60fe82887f2ba65f6e5280b277ffdbf15e83e1116ef2b51aeb229012102be8f7ea648d3522731589bca6aaade20fd6767910f77f1c7ae2c51d1048c2abcfeffffff02eb1a6002000000001976a914cb4f45b4ecfe54b25106a919237cf34ce193c1b988ac1d6ca351130000001976a91455ae51684c43435da751ac8d2173b2652eb6410588ac6f1a0600";
    let raw_tx = hex::decode(tx_str.clone()).unwrap();
    let mut stream = Cursor::new(raw_tx.clone());
    let tx = Tx::parse(&mut stream, false).unwrap();

    let mut tx_json = json!({});
    tx_json = tx.tx_json();
    tx_json["hex"] = json!(tx_str);
    tx_json["hash"] = json!(hex::encode( tx.hash() ).to_string());
    let mut inputs_json_list: Vec<serde_json::value::Value> = vec![];
    for input in tx.tx_ins() {
        let mut tx_in_json = json!({});
        tx_in_json = input.get_json();
        inputs_json_list.push(tx_in_json);
    }
    tx_json["inputs"] = json!(inputs_json_list);
    let mut outputs_json_list: Vec<serde_json::value::Value> = vec![];
    for output in tx.tx_outs() {
        let mut tx_out_json = json!({});
        tx_out_json = output.get_json();
        outputs_json_list.push(tx_out_json);
    }
    tx_json["outputs"] = json!(outputs_json_list);
    tx_json.to_string()
}
*/
#[wasm_bindgen]
pub async fn r_tx_json_from_id(tx_id: String) -> String {
    set_panic_hook();

    let tx = Tx::new_from_id(tx_id).await;

    let mut tx_json = json!({});
    tx_json = tx.tx_json();
    tx_json["hash"] = json!(hex::encode( tx.hash() ).to_string());
    let mut inputs_json_list: Vec<serde_json::value::Value> = vec![];
    for input in tx.tx_ins() {
        let mut tx_in_json = json!({});
        tx_in_json = input.get_json();
        inputs_json_list.push(tx_in_json);
    }
    tx_json["inputs"] = json!(inputs_json_list);
    let mut outputs_json_list: Vec<serde_json::value::Value> = vec![];
    for output in tx.tx_outs() {
        let mut tx_out_json = json!({});
        tx_out_json = output.get_json();
        outputs_json_list.push(tx_out_json);
    }
    tx_json["outputs"] = json!(outputs_json_list);
    tx_json.to_string()
}
#[wasm_bindgen]
pub async fn verify_tx(tx_id: String) -> String {
    let mut tx = Tx::new_from_id(tx_id).await;

    if tx.verify_async().await == true {
        return "valid".to_string();
    } else { return "invalid".to_string(); }


}